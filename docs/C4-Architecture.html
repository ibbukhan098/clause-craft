<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ClauseCraft – C4 Architecture</title>
    <style>
      :root { --fg: #0f172a; --muted: #475569; }
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color: var(--fg); line-height: 1.55; margin: 0; }
      .container { max-width: 960px; margin: 0 auto; padding: 32px 20px; }
      h1, h2, h3 { line-height: 1.2; margin: 24px 0 12px; }
      h1 { font-size: 32px; }
      h2 { font-size: 24px; margin-top: 36px; }
      h3 { font-size: 18px; margin-top: 28px; color: var(--muted); }
      p, li { font-size: 15px; }
      ul { padding-left: 20px; }
      .section { margin-top: 24px; }
      .diagram { margin: 16px 0 8px; border: 1px solid #e5e7eb; padding: 12px; border-radius: 8px; background: #fff; }
      .diagram img, .diagram svg { width: 100%; height: auto; }
      .meta { color: var(--muted); font-size: 14px; }
      hr { border: 0; height: 1px; background: #e5e7eb; margin: 24px 0; }
      @page { size: A4; margin: 16mm; }
      @media print {
        .container { padding: 0; }
        a[href]::after { content: ""; }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ClauseCraft – C4 Architecture</h1>
      <p class="meta">This document outlines the C4 model (Context, Container, Component, Code) for the ClauseCraft application.</p>

      <div class="section">
        <h2>Level 1: System Context</h2>
        <p>Shows ClauseCraft in relation to users, Hugging Face Router, and Browser LocalStorage.</p>
        <div class="diagram">
          <img src="./c4-diagrams/context.svg" alt="System Context Diagram" />
        </div>
      </div>

      <hr />

      <div class="section">
        <h2>Level 2: Container</h2>
        <p>Shows the React Web App and Supabase Edge Functions and how they interact with external services.</p>
        <div class="diagram">
          <img src="./c4-diagrams/container.svg" alt="Container Diagram" />
        </div>
      </div>

      <hr />

      <div class="section">
        <h2>Level 3: Component (Frontend)</h2>
        <p>Breakdown of the React app into pages, components, hooks, integrations, and utilities.</p>
        <div class="diagram">
          <img src="./c4-diagrams/component-frontend.svg" alt="Frontend Component Diagram" />
        </div>
      </div>

      <hr />

      <div class="section">
        <h2>Level 4: Code (Draft Page Flow)</h2>
        <p>Key functions and data flow for clause analysis and assessment within the Draft page.</p>
        <div class="diagram">
          <img src="./c4-diagrams/code-draft-flow.svg" alt="Draft Page Code Flow" />
        </div>
      </div>

      <hr />

      <div class="section">
        <h2>Notes</h2>
        <ul>
          <li>Contracts and analyses are stored in the browser via LocalStorage.</li>
          <li>Edge functions call Hugging Face Router using an OpenAI-compatible API.</li>
          <li>Model fallback prioritizes high-quality available instruct models.</li>
        </ul>
      </div>
    </div>
  </body>
  </html>

